{"version":3,"file":"gallery.js","sources":["../src/createGallery.js","../src/gallery.js"],"sourcesContent":["const createElement = (tag, properties) => Object.assign(document.createElement(tag), properties);\n\nconst createGalleryImage = ({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => {\n   const newHyperLink = createElement(\"a\", {className: \"gallery-link\",\n                                            href: largeImageURL});\n\n   const newImage = createElement(\"img\", {className: \"gallery-image\",\n                                          src: webformatURL,\n                                          alt: tags});\n\n   const descDiv = createElement(\"div\", {className: \"desc-box\"});\n   descDiv.innerHTML =  '<div class=\"inner-desc-box\" >' +\n                        '<h4 class=\"gallery-headline\">Likes</h4> ' + \n                        `<p class=\"gallery-desc\">${likes}</p></div>` +\n\n                        '<div class=\"inner-desc-box\" >' +\n                        '<h4 class=\"gallery-headline\">Views</h4> ' + \n                        `<p class=\"gallery-desc\">${views}</p></div>` +\n\n                        '<div class=\"inner-desc-box\" >' +\n                        '<h4 class=\"gallery-headline\">Comments</h4> ' + \n                        `<p class=\"gallery-desc\">${comments}</p></div>` +\n\n                        '<div class=\"inner-desc-box\" >' +\n                        '<h4 class=\"gallery-headline\">Downloads</h4> ' + \n                        `<p class=\"gallery-desc\">${downloads}</p></div>`\n\n   newHyperLink.append(newImage);\n   newHyperLink.append(descDiv);\n   return newHyperLink;\n};\n\nexport const createListItem = (images, gallery) => {\n   const list = images.map(createGalleryImage)\n                      .map(image => {\n                               const li = createElement(\"li\");\n                               li.append(image);\n                               return li;\n                      }); \n\n   const fragment = document.createDocumentFragment();\n   fragment.append(...list);\n\n   gallery.appendChild(fragment);\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { createListItem } from \"./createGallery\";   \nimport axios from \"axios\";\n\n// Constants\nconst searchForm = document.querySelector('.searchForm');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst secondLoader = document.getElementById('secondLoader');\nconst loadMoreBtn = document.querySelector('.loadMore');\n\n// PixaBay properties\nconst key = \"46332612-74f33d1ba9ca951ac6c22d341\";\nconst image_type = \"photo\";\nconst orientation = \"horizontal\";\nconst safesearch = \"true\";\nlet searchValue = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\n\n// Auxiliary functions \nconst hideElement = (elem) => {elem.style.display = \"none\"};\nconst showBlock = (elem) => {elem.style.display = \"block\"};\nconst showFlex = (elem) => {elem.style.display = \"flex\"};\n\n\nconst fetchImages = async (url) => {\n  const response = await axios.get(url); \n  return response.data;\n};\n\nconst generateImages = async (value, page) => {\n  let URL = \"https://pixabay.com/api/?key=\"+key\n        +\"&q=\"+encodeURIComponent(`${value}`)\n        +\"&image_type=\"+image_type\n        +\"&orientation=\"+orientation\n        +\"&safesearch=\"+safesearch\n        +\"&page=\"+page\n        +\"&per_page=\"+39;\n\n  try {\n    const images = await fetchImages(URL);\n    totalHits = images.totalHits;\n    if (images.total === 0 || value === \"\") {\n      hideElement(loader);\n      hideElement(loadMoreBtn);\n      iziToast.error({message: `Sorry, there are no images matching your search query. Please try again!`});\n      return;\n    } else if (page * 39 >= totalHits) {\n      hideElement(secondLoader);\n      hideElement(loadMoreBtn);\n      iziToast.info({message: `We're sorry, but you've reached the end of search results.`});\n      return;\n    }\n\n    hideElement(loader);\n    hideElement(secondLoader);\n    createListItem(images.hits, gallery);\n    showFlex(gallery);\n    showBlock(loadMoreBtn);\n    const lightBox = new SimpleLightbox(\"ul.gallery a\", {\n        captionType: \"attr\",\n        captionsData: \"alt\",\n        sourceAttr: \"href\",\n        overlay: true,\n        overlayOpacity: 1,\n    });\n    lightBox.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  showBlock(loader);\n  hideElement(gallery);\n  hideElement(loadMoreBtn);\n  searchValue = document.getElementById('searchImages').value.trim();\n  gallery.innerHTML = \"\";\n  \n  generateImages(searchValue, currentPage);\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage++;\n  hideElement(loadMoreBtn);\n  showBlock(secondLoader);\n\n  await generateImages(searchValue, currentPage);\n\n  const galleryItemHeight = document\n    .querySelector('.gallery-link')\n    .getBoundingClientRect().height;\n  window.scrollBy({ top: galleryItemHeight * 2 - 10, behavior: 'smooth' });\n});"],"names":["createElement","tag","properties","createGalleryImage","webformatURL","largeImageURL","tags","likes","views","comments","downloads","newHyperLink","newImage","descDiv","createListItem","images","gallery","list","image","li","fragment","searchForm","loader","secondLoader","loadMoreBtn","key","image_type","orientation","safesearch","searchValue","currentPage","totalHits","hideElement","elem","showBlock","showFlex","fetchImages","url","axios","generateImages","value","page","URL","iziToast","SimpleLightbox","error","event","galleryItemHeight"],"mappings":"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"}